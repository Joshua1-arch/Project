<!DOCTYPE html>
<html>
<head>
	<title>Admin</title>
	
	<link rel="stylesheet" type="text/css" href="bootstrap-5.0.0-beta3-dist/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="shortcut icon" type="text/css" href="download.png">
</head>
<body>
	<center>
		<form  id="log">
		<div class="form-text mb-3">
		    <label class="form-text-label text-white">Username</label>
		    <input type="text" class="form-control  w-25" placeholder="Username" id="userName" required>
	    	
	  	</div>

		<div class="form-password mb-3">
		    <label class="form-password-label text-white" >Pin</label>
		    <input type="password" class="form-control  w-25" placeholder="Eg. 1234" id="pin" required>
		   
	  	</div>
	  	<button type="button" class="btn btn-success" onclick="logIn()">Sign In</button>
	  </form>
	  <main>
	  		<button id="all" class="btn btn-danger" onclick="controlAccounts()">All Accounts</button>
			  <br>
			  <button id="semiAll" class="btn btn-primary" onclick="hideAllAccount()">Hide</button>
	  		<div id="showAccounts" class="text-white container" ></div>
	  </main>
	  <center>
	  	
	  </center>


	  <script type="text/javascript">
	  	all.style.display = 'none'
		  semiAll.style.display='none'
	  	admin = [];
	  	allNewAdmins = []
	  	allAccounts = []
	  	// class Admins {
	  	// 	constructor(yourName, yourUsername, yourPin) {
	  	// 		this.name = yourName;
	  	// 		this.username = yourUsername;
	  	// 		this.pin = yourPin;
	  	// 	}
	  	// }

	  	defaultAdmin = {
	  		name : "Joshua",
	  		username : "Captain",
	  		pin : "08030676750",
	  	}
	  	admin.push(defaultAdmin)
	  	localStorage.allAdmins = JSON.stringify(admin);
	  	admins = JSON.parse(localStorage.allAdmins)
	  	allNewAdmins = admins;
	  	// console.log(admin)
	  	function logIn() {
	  		for (var i = 0; i < allNewAdmins.length; i++) {
	  			if (allNewAdmins[i].username == userName.value && allNewAdmins[i].pin == pin.value) {
	  				alert("Welcome, " + admin[i].name)
	  				log.style.display = 'none'
	  				all.style.display = 'block'
					  semiAll.style.display='block'
	  				return
	  			} else {
	  				alert("invalid Details")
	  				return
	  			}
	  		}
	  	}


	  	function controlAccounts() {
	  		accounts = JSON.parse(localStorage.allCustomers);
		  	allAccounts = accounts;
		  	showAccounts.innerHTML = ""
		  	for (var i = 0; i < allAccounts.length; i++) {
		  		showAccounts.innerHTML += "Customer " + eval(i+1) + '<br><br>';
		  		showAccounts.innerHTML += "Name: " + allAccounts[i].firstName + ' '+ allAccounts[i].lastName +'<br>'; 
		  		showAccounts.innerHTML += "Account Number: " + allAccounts[i].accNo + '<br>';
		  		showAccounts.innerHTML += "Pin: " + allAccounts[i].uPin + '<br>';
		  		showAccounts.innerHTML += "Phone Number: " + allAccounts[i].phoneNumber + '<br>';
		  		showAccounts.innerHTML += "Email: " + allAccounts[i].mail + '<br>';
		  		showAccounts.innerHTML += "Amount: " + allAccounts[i].amount + '<br>';
		  		showAccounts.innerHTML += '<button onclick="del('+i+')">Delete Account</button>'

		  	}
	  	}
		  function hideAllAccount(){
			  showAccounts.innerHTML=""
		  }
	  	function del(num) {
	  		allAccounts.splice(num, 1);
	  		localStorage.allCustomers = JSON.stringify(allAccounts);
	  		controlAccounts();
	  	}
	  </script>


	  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</body>
</html>